{% extends 'base.html.twig' %}

{% block title %}Pays{% endblock %}

{% block body %}
   

        <div class="card mb-3 bg-transparent text-center mx-auto" style="max-width: 70rem;">
  
            <img src="{{ asset("images/" ~ pay.paysage ) }}" alt="{{ pay.nom }}">
    </div>


    <div class="card mb-3 mx-auto bg-transparent" style="max-width: 70rem;">
    <div class="row g-0">
      <div class="col-md-6 mx-auto mt-5" style="max-width: 9rem;">
      <img src="{{ asset("images/" ~ pay.drapeau ) }}" class="img-fluid rounded-start"  alt="{{ pay.nom }}">
      </div>
      <div class="col-md-6 mt-4">
        <div class="card-body bg-transparent">
          <h1 class="card-title fw-bolder fst-italic">{{ pay.nom }}</h1>
        <li class="list-group-item">Nombre de population : {{ pay.population }} Millions d'habitants</li>
        <li class="list-group-item">Superficie du pays : {{ pay.superficie }} KmÂ²</li>
        </div>
      </div>
       
  <p class="lh-base text-center mt-5">{{ pay.description }}</p>
    </div>
  </div>    

    <a href="{{ path('app_pays_index') }}">back to list</a>

    <a href="{{ path('app_pays_edit', {'id': pay.id}) }}">edit</a>
    <a href="#" class="btn btn-primary">Go Up</a>

    {% for commentaire in commentaires %}
<section style="background-color: #000;">
<div class="container my-5 py-5">
<div class="row d-flex justify-content-center">
  <div class="col-md-12 col-lg-10 col-xl-8">
    <div class="card">
      <div class="card-body">
        <div class="d-flex flex-start align-items-center">
          <img class="rounded-circle shadow-1-strong me-3"
            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar" width="60"
            height="60" />
          <div>
            <h5 class="fw-bold text-success mb-1">{{ commentaire.pays.nom }}</5>
            <h6 class="fw-bold text-primary mb-1">{{ commentaire.user.username }}</h6>
            <p class="text-muted small mb-0">
              Shared publicly - Jan 2020
            </p>
          </div>
        </div>

        <p class="mt-3 mb-4 pb-2 text-dark">
              {{ commentaire.message }}
        </p>

        <div class="small d-flex justify-content-start">
          <a href="#!" class="d-flex align-items-center me-3">
            <i class="far fa-thumbs-up me-2"></i>
            <p class="mb-0">Like</p>
          </a>
          <a href="{{ path("app_commentaire_new") }}" class="d-flex align-items-center me-3">
            <i class="far fa-comment-dots me-2"></i>
            <p class="mb-0">Comment</p>
          </a>
          <a href="#!" class="d-flex align-items-center me-3">
            <i class="fas fa-share me-2"></i>
            <p class="mb-0">Share</p>
          </a>
        </div>
      </div>
      <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
        <div class="d-flex flex-start w-100">
          <img class="rounded-circle shadow-1-strong me-3"
            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar" width="40"
            height="40" />
          <div class="form-outline w-100">
            <textarea class="form-control" id="textAreaExample" rows="4"
              style="background: #fff;"></textarea>
            <label class="form-label" for="textAreaExample" {{ commentaire.message }}>Message</label>
          </div>
        </div>
        <div class="float-end mt-2 pt-1">
          <button type="button" class="btn btn-primary btn-sm">Post comment</button>
          <button type="button" class="btn btn-outline-primary btn-sm">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
</section>
{% else %}
<tr>
    <td colspan="3">no records found</td>
</tr>
{% endfor %}
  
      </div>

    {{ include('pays/_delete_form.html.twig') }}

    <form id="form-{{pay.id}}">
    {{ form_start(form) }}
    {{ form_widget(form) }}
    {# {% if app.user %} #}
        <button class="btn">{{ button_label|default('Save') }}</button>
    {# {% else %}
        <p class="alert alert-danger">Connectez-vous et laissez un commentaire</p>
    {% endif %} #}
    {{ form_end(form) }}
    </form>
    <div id="comment"></div>
    {% for leCommentaire in commentaires %}
    <p>{{ leCommentaire.message }}</p>
    {% endfor %}

 <script>
// window.addEventListener("load", () => {
//   $("#form-{{pay.id}}").on("submit", (evtSubmit) => {
//     evtSubmit.preventDefault();
//     console.log($("#form-{{pay.id}} [name='message']").val());
//     $.ajax({
//       url: "{{ path('app_commentaire_ajouter', {id: pay.id}) }}",
//       method: "POST",
//       data: "msg=" + $("#form-{{pay.id}} [name='commentaire[message]']").val(),
//       dataType: "json",
//       success: (data) => {
//         $("#comment").html(data);
//         console.log("Data = " + data);
//       },
//       error: (jqXHR, status, error) => {
//         console.log("ERREUR AJAX", status, error);
//       },
//     });
//   });
//   });
// </script>
{% endblock %}

